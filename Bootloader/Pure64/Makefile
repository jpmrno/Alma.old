include ../../Makevars
include Makevars

PXESTART_FILE = ../$(BOOTLOADER_PXESTART_NAME)
MBR_FILE = ../$(FILESYSTEM_MBR_NAME)
BOOTLOADER_FILE = ../$(BOOTLOADER_NAME)

all: $(PXESTART_FILE) $(MBR_FILE) $(BOOTLOADER_FILE)

$(PXESTART_FILE):
	$(ASM) $(ASM_FLAGS) $(BOOTSECTORS_PATH)/$(SOURCE_PXESTART) -o $@

$(MBR_FILE):
	$(ASM) $(ASM_FLAGS) $(BOOTSECTORS_PATH)/$(SOURCE_MBR) -o $@

$(BOOTLOADER_FILE):
	cd $(SRC_PATH); $(ASM) $(ASM_FLAGS) $(SOURCE_BOOTLOADER) -o ../$@

clean:
	rm -f $(PXESTART_FILE)
	rm -f $(MBR_FILE)
	rm -f $(BOOTLOADER_FILE)

.PHONY: all clean
